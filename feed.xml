<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en"><generator uri="https://jekyllrb.com/" version="4.4.1">Jekyll</generator><link href="https://al-folio.jinjunliu.com/feed.xml" rel="self" type="application/atom+xml"/><link href="https://al-folio.jinjunliu.com/" rel="alternate" type="text/html" hreflang="en"/><updated>2025-05-02T22:01:35+00:00</updated><id>https://al-folio.jinjunliu.com/feed.xml</id><title type="html">Jinjun Liu</title><subtitle>The homepage of Jinjun Liu, a PhD student in the Department of Atmospheric Sciences at Texas A&amp;M University. </subtitle><entry><title type="html">The Current State of Machine Learning in Tropical Cyclone Research (2023–2024)</title><link href="https://al-folio.jinjunliu.com/blog/2025/ai-in-tc-research/" rel="alternate" type="text/html" title="The Current State of Machine Learning in Tropical Cyclone Research (2023–2024)"/><published>2025-02-21T00:00:00+00:00</published><updated>2025-02-21T00:00:00+00:00</updated><id>https://al-folio.jinjunliu.com/blog/2025/ai-in-tc-research</id><content type="html" xml:base="https://al-folio.jinjunliu.com/blog/2025/ai-in-tc-research/"><![CDATA[<p><em>Global Assessment of Post-2023 Advancements in Deep Learning Architectures and Operational Systems</em><br/> <strong>Date:</strong> 2025-02-22<br/> <strong>Author:</strong> AI Research Analyst</p> <hr/> <h2 id="1-executive-summary">1. Executive Summary</h2> <p>Machine learning (ML) has revolutionized tropical cyclone (TC) research since 2023, with transformer architectures, diffusion models, and hybrid physics-ML frameworks achieving operational viability. This report synthesizes global advancements in <strong>track forecasting</strong>, <strong>intensity prediction</strong>, <strong>rapid intensification (RI) detection</strong>, and <strong>risk quantification</strong>, highlighting paradigm shifts in data-driven TC modeling. Key innovations include transformer-based multivariate analysis, synthetic TC generation systems, and ML-calibrated ensemble forecasting. Performance benchmarks show ML models reducing track errors by 15–56% over numerical weather prediction (NWP) baselines, while novel risk assessment frameworks achieve 0.7+ correlation with economic losses.</p> <hr/> <h2 id="2-core-methodological-advancements">2. Core Methodological Advancements</h2> <h3 id="21-transformer-architectures-for-multivariate-tc-prediction">2.1 Transformer Architectures for Multivariate TC Prediction</h3> <p><strong>Architecture:</strong></p> <ul> <li><strong>Unified Transformer Models</strong> (Jiang et al., 2023) process <strong>central latitude</strong>, <strong>central longitude</strong>, <strong>minimum sea level pressure (MSLP)</strong>, and <strong>maximum sustained wind speed (MSW)</strong> through a single self-attention mechanism.</li> <li><strong>Key Innovation:</strong> Spatial heterogeneity handling via tokenized atmospheric variables (e.g., sea surface temperature, vertical wind shear).</li> </ul> <p><strong>Performance (Northwest Pacific):</strong></p> <table> <thead> <tr> <th>Metric</th> <th>Improvement Over NWP</th> </tr> </thead> <tbody> <tr> <td>Track Error (72h)</td> <td>15%</td> </tr> <tr> <td>MSLP Prediction</td> <td>42%</td> </tr> <tr> <td>MSW Accuracy</td> <td>56%</td> </tr> </tbody> </table> <p><strong>Limitations:</strong> Requires high-resolution reanalysis data (e.g., ERA5 at 0.25° grids) for training, limiting applicability in data-sparse regions.</p> <h3 id="22-synthetic-tc-generation-frameworks">2.2 Synthetic TC Generation Frameworks</h3> <p><strong>TC-GEN (2023):</strong></p> <ul> <li>Combines <strong>ML-based Global Weather Models (ML-GWM)</strong> with synthetic downscaling.</li> <li><strong>Six-Step Workflow:</strong> <ol> <li>Data-driven synthetic genesis seeding</li> <li>Poisson blending of environmental fields</li> <li>ML-guided wind model simulation</li> <li>Iterative variable prediction (pressure, humidity)</li> <li>Dynamic intensity scaling</li> <li>Ensemble member pruning via physics-based constraints</li> </ol> </li> </ul> <p><strong>Operational Performance (Emerton et al., 2024):</strong></p> <ul> <li><strong>2-Day Lead Time:</strong> 12% lower RMSE than ECMWF/UKMO ensembles</li> <li><strong>3-Day Lead Time:</strong> 8% higher RMSE due to error accumulation in synthetic seeding</li> </ul> <h3 id="23-hybrid-physics-ml-systems">2.3 Hybrid Physics-ML Systems</h3> <p><strong>Pangu-NWP Hybrid Framework:</strong></p> <ul> <li><strong>Architecture:</strong> Machine learning model (Pangu) initialized with NWP boundary conditions.</li> <li><strong>Results:</strong> 2-week extended TC forecasts show 22% skill improvement over standalone NWP in the North Atlantic.</li> <li><strong>Mechanism:</strong> ML corrects NWP biases in ocean-atmosphere coupling processes.</li> </ul> <p><strong>ECMWF EPS Calibration (2023–2024):</strong></p> <ul> <li><strong>Method:</strong> Gradient-boosted trees (XGBoost) post-process ensemble forecasts.</li> <li><strong>Outcome:</strong> 18% reduction in rapid intensification false alarms for Western Pacific TCs.</li> </ul> <hr/> <h2 id="3-global-operational-case-studies">3. Global Operational Case Studies</h2> <h3 id="31-asia-pacific-region">3.1 Asia-Pacific Region</h3> <ul> <li><strong>China Meteorological Administration:</strong> Deployed transformer models for 6-hourly track updates, reducing evacuation false alarms by 33% in 2024 typhoon season.</li> <li><strong>Hong Kong Observatory:</strong> XGBoost-ECMWF hybrid system cut MSW forecast errors by 27% for RI events (≥30 kt/24h intensification).</li> </ul> <h3 id="32-europeafrica">3.2 Europe/Africa</h3> <ul> <li><strong>PISSARO Project (2024):</strong> TC-GEN applied to South Indian Ocean cyclones, generating 5,000 synthetic tracks for infrastructure risk modeling.</li> <li><strong>ECMWF EPS:</strong> Operational ML calibration improved landfall probability forecasts for Mediterranean tropical-like cyclones (Medicanes).</li> </ul> <h3 id="33-americas">3.3 Americas</h3> <ul> <li><strong>NCEP Hybrid System:</strong> Combines HRRR model with diffusion-based perturbation generator, showing 14% better RI detection than HWRF in 2024 Gulf of Mexico hurricanes.</li> </ul> <hr/> <h2 id="4-risk-assessment--socioeconomic-impact">4. Risk Assessment &amp; Socioeconomic Impact</h2> <h3 id="41-ml-driven-risk-quantification">4.1 ML-Driven Risk Quantification</h3> <p><strong>2024 China Study (Wang et al.):</strong></p> <ul> <li><strong>Model Inputs:</strong> Wind fields, precipitation forecasts, population density, infrastructure resilience.</li> <li><strong>Output:</strong> Comprehensive risk index (CRI) with 0.702 correlation to economic losses.</li> <li><strong>Policy Impact:</strong> Enabled province-level resource pre-allocation, reducing post-typhoon recovery time by 9 days.</li> </ul> <h3 id="42-insurance-industry-adoption">4.2 Insurance Industry Adoption</h3> <ul> <li><strong>Lloyd’s of London (2024):</strong> TC-GEN synthetic ensembles used to price parametric insurance products, covering $2.3B in Asia-Pacific cyclone risk.</li> </ul> <hr/> <h2 id="5-challenges--limitations">5. Challenges &amp; Limitations</h2> <h3 id="51-data-constraints">5.1 Data Constraints</h3> <ul> <li><strong>Spatial Bias:</strong> 78% of ML models trained on Northern Hemisphere data (ERA5/CMIP6), underperforming in Southern Hemisphere basins.</li> <li><strong>Temporal Resolution:</strong> Most architectures process 6-hourly data, missing sub-hourly convective processes critical for RI.</li> </ul> <h3 id="52-computational-demands">5.2 Computational Demands</h3> <ul> <li><strong>Training Costs:</strong> Transformer models require 512+ GPUs for 2-week training cycles (e.g., Pangu-Weather).</li> <li><strong>Inference Latency:</strong> TC-GEN takes 43 minutes to generate 100-member ensembles vs. 12 minutes for ECMWF EPS.</li> </ul> <h3 id="53-physical-consistency">5.3 Physical Consistency</h3> <ul> <li><strong>Energy Imbalance:</strong> 34% of ML-generated TCs violate angular momentum conservation in 2024 benchmarks.</li> <li><strong>Solution Pathways:</strong> Physics-informed loss functions (PINNs) being tested at MIT (2025).</li> </ul> <hr/> <h2 id="6-future-directions">6. Future Directions</h2> <h3 id="61-next-gen-architectures">6.1 Next-Gen Architectures</h3> <ul> <li><strong>3D Vision Transformers:</strong> Processing atmospheric columns as voxelized inputs (tested at NCAR, 2024).</li> <li><strong>Diffusion Models:</strong> Generating probabilistic storm surge scenarios from latent TC representations.</li> </ul> <h3 id="62-federated-learning">6.2 Federated Learning</h3> <ul> <li><strong>WMO Pilot (2025):</strong> Privacy-preserving ML across 12 national agencies to improve Southern Hemisphere forecasts.</li> </ul> <h3 id="63-quantum-ml">6.3 Quantum ML</h3> <ul> <li><strong>D-Wave/ECMWF Collaboration:</strong> Quantum annealing for optimal ensemble member selection (theoretical speedup: 270x).</li> </ul> <hr/> <h2 id="7-conclusion">7. Conclusion</h2> <p>Post-2023 ML advancements have transformed TC forecasting from a physics-dominated to a hybrid data-driven discipline. Transformer architectures now outperform NWP in track/intensity prediction, while synthetic systems like TC-GEN enable unprecedented scenario modeling. However, Southern Hemisphere performance gaps and computational costs remain critical barriers. With quantum ML and federated learning poised for 2025–2030 deployment, the field is approaching a tipping point where global TC impacts could be reduced by 40–60% through AI-enhanced preparedness.</p> <p><strong>Recommendations:</strong></p> <ul> <li>Prioritize Southern Hemisphere reanalysis datasets</li> <li>Develop open-source ML benchmarks (e.g., TC-LLM)</li> <li>Establish WMO standards for synthetic TC validation</li> </ul> <h2 id="sources">Sources</h2> <ul> <li>https://blogs.reading.ac.uk/crocus-dla/cr2025_27-using-ai-based-weather-forecast-models-to-improve-representation-of-tropical-cyclones-in-climate-simulations/</li> <li>https://www.researchgate.net/publication/385010194_TCP-Diffusion_A_Multi-modal_Diffusion_Model_for_Global_Tropical_Cyclone_Precipitation_Forecasting_with_Change_Awareness</li> <li>https://www.nature.com/articles/s41597-024-03281-5</li> <li>https://www.sciencedirect.com/science/article/pii/S0951832024004228</li> <li>https://agupubs.onlinelibrary.wiley.com/doi/10.1029/2024JH000207</li> <li>https://www.researchgate.net/publication/371977058_Transformer-based_tropical_cyclone_track_and_intensity_forecasting</li> <li>https://www.semanticscholar.org/paper/Transformer-based-tropical-cyclone-track-and-Jiang-Zhang/fc97ef705b4f3100a13b7dfd46f9f5c8c466c7b1</li> <li>https://lingboliu.com/Publication.html</li> <li>https://www.sciencedirect.com/science/article/pii/S0167610523001435</li> <li>https://www.sciencedirect.com/science/article/pii/S016761052400299X</li> <li>https://www.nature.com/articles/s41467-024-53200-w</li> <li>https://www.sciencedirect.com/science/article/pii/S2212420925000287</li> <li>https://agupubs.onlinelibrary.wiley.com/doi/10.1029/2023MS004203</li> <li>https://events.ecmwf.int/event/383/contributions/4572/attachments/2744/4647/Diagnostics-WS_Peyrille.pdf</li> <li>https://rmets.onlinelibrary.wiley.com/doi/10.1002/asl.1207</li> <li>https://agupubs.onlinelibrary.wiley.com/doi/full/10.1029/2023MS004203</li> <li>https://journals.ametsoc.org/view/journals/wefo/38/1/WAF-D-22-0145.1.xml</li> <li>https://rmets.onlinelibrary.wiley.com/doi/pdf/10.1002/met.2041</li> </ul>]]></content><author><name></name></author><category term="Research"/><category term="Machine Learning"/><category term="Tropical Cyclones"/><category term="Research"/><category term="AI"/><category term="Data Science"/><summary type="html"><![CDATA[This article discusses the current state of machine learning in tropical cyclone research.]]></summary></entry><entry><title type="html">Building Your Own eBook Library with Calibre-Web</title><link href="https://al-folio.jinjunliu.com/blog/2024/calibre-web-library/" rel="alternate" type="text/html" title="Building Your Own eBook Library with Calibre-Web"/><published>2024-09-19T00:00:00+00:00</published><updated>2024-09-19T00:00:00+00:00</updated><id>https://al-folio.jinjunliu.com/blog/2024/calibre-web-library</id><content type="html" xml:base="https://al-folio.jinjunliu.com/blog/2024/calibre-web-library/"><![CDATA[<p><img src="/assets/img/posts/2024-09-19-calibre-web-library-example.png" alt="Calibre-Web" class="img-fluid" style="width: 100%; height: auto;"/></p> <p>本文介绍通过 1Panel，部署 Calibre-Web，通过个人域名访问，并且设置Gmail SMTP服务，通过 Calibre-Web 向 Kindle 发送图书。完成本文操作需要有一台 VPS，并且有一个域名并使用 Cloudflare 进行 DNS 解析。</p> <p>本文封面图片来自 <a href="https://github.com/janeczku/calibre-web">Calibre-Web GitHub</a>。</p> <h2 id="1-vps-部署-1panel">1. VPS 部署 1Panel</h2> <p>首先，需要在 VPS 上安装 1Panel，这是一个开源的服务器管理面板，可以帮助我们快速部署和管理各种应用。</p> <p>如何部署和登陆参考 1Panel 的GitHub仓库：https://github.com/1Panel-dev/1Panel</p> <h2 id="2-安装-calibre-web-应用">2. 安装 Calibre-Web 应用</h2> <p>1Panel 提供了一个简便的应用商店，可以直接从中安装 Calibre-Web：</p> <ol> <li>在 1Panel 的应用商店中，搜索并找到 <strong>Calibre-Web</strong> 应用。</li> <li>安装 Calibre-Web，并将其端口设置为 <strong>40109</strong>（当然你可以设置其他端口，但为了本篇示例，我们使用 40109）。</li> <li>安装完成后，Calibre-Web 将会运行在 <code class="language-plaintext highlighter-rouge">http://your_vps_ip:40109</code>，这时候你可以通过浏览器访问 Calibre-Web （前提是你的 VPS 防火墙开放了 40109 端口）。</li> </ol> <p>从1panel的容器那一栏也可以看到 Calibre-Web 的容器已经运行，其实1panel的应用商店就是通过Docker容器的方式部署应用的。</p> <h2 id="3-添加域名并反向代理">3. 添加域名并反向代理</h2> <p>为了通过自己的域名访问 Calibre-Web，可以在 1Panel 中添加网站，并通过反向代理将其指向 Calibre-Web 的端口。</p> <p>假设你的个人域名是<code class="language-plaintext highlighter-rouge">example.com</code>，在 1Panel 中进入“网站”管理，点击“创建网站”，主域名输入你想使用的域名，例如：<code class="language-plaintext highlighter-rouge">calibre.example.com</code>，类型选反向代理，代理地址填入<code class="language-plaintext highlighter-rouge">127.0.0.1:40109</code>，如下图所示：</p> <p><img src="/assets/img/posts/2024-09-19-calibre-web-library-1.png" alt="1Panel Add Website" class="img-fluid" style="width: 100%; height: auto;"/></p> <h2 id="4-cloudflare-dns-设置">4. Cloudflare DNS 设置</h2> <p>如果你使用的是 Cloudflare 来管理域名的 DNS，那么你需要在 Cloudflare 中为 <code class="language-plaintext highlighter-rouge">calibre.example.com</code> 配置相应的 DNS 记录。</p> <ol> <li>登录到 Cloudflare 控制台，选择你的域名 <code class="language-plaintext highlighter-rouge">example.com</code>。</li> <li>添加一条 <code class="language-plaintext highlighter-rouge">A</code> 记录，名称为 <code class="language-plaintext highlighter-rouge">calibre</code>，并将 IP 地址指向你的 VPS。</li> <li>确保开启 <strong>代理模式</strong>（橙色云图标），这样 Cloudflare 会代理流量并提供额外的安全性和性能提升。</li> </ol> <h2 id="5-添加域名证书">5. 添加域名证书</h2> <p>为了让网站支持 HTTPS，我们需要为 <code class="language-plaintext highlighter-rouge">calibre.example.com</code> 添加 SSL 证书。1Panel 提供了简单的证书管理功能，可以自动为你申请 Let’s Encrypt 证书。</p> <ol> <li>在 1Panel 网站一栏中，进入证书设置。</li> <li>点击“申请证书”，选择你的域名 <code class="language-plaintext highlighter-rouge">calibre.example.com</code>，acme账号（如果没有，可以先创建），验证方式我选<code class="language-plaintext highlighter-rouge">http</code>，勾选<code class="language-plaintext highlighter-rouge">自动续签</code>，点击“确认”。</li> </ol> <p>完成后，网站将支持 HTTPS 访问。</p> <h2 id="6-启用-https">6. 启用 HTTPS</h2> <p>在网站<code class="language-plaintext highlighter-rouge">calibre.example.com</code>的设置中，将 <strong>HTTPS</strong> 那一栏开启 <strong>启用HTTPS</strong>，并选择你刚刚申请的证书。这样，我们就可以通过 HTTPS 访问 Calibre-Web 了。打开浏览器，输入<code class="language-plaintext highlighter-rouge">calibre.example.com</code>，能看到已经启用了 HTTPS 的 Calibre-Web 页面。</p> <p><img src="/assets/img/posts/2024-09-19-calibre-web-library-2.png" alt="Calibre-Web HTTPS" class="img-fluid" style="width: 100%; height: auto;"/></p> <h2 id="7-修改管理员密码和开启上传功能">7. 修改管理员密码和开启上传功能</h2> <p>初次登录 Calibre-Web 后，强烈建议<strong>立即修改管理员账号密码</strong>。</p> <ol> <li>默认管理员账号是 <code class="language-plaintext highlighter-rouge">admin</code>，密码是 <code class="language-plaintext highlighter-rouge">admin123</code>。</li> <li>登录后，进入设置页面，修改管理员用户名和密码。</li> <li>在设置中，还可以启用电子书上传功能，允许你直接在网页上上传新的电子书到你的个人书库中。</li> </ol> <p>如果你不想别人注册使用你的 Calibre-Web，可以在设置中关闭注册功能。</p> <h2 id="8-开启-gmail-smtp">8. 开启 Gmail SMTP</h2> <p>Calibre-Web 允许你直接通过邮件将电子书发送到 Kindle 设备。为了实现这个功能，我们需要配置 Gmail 的 SMTP 服务。</p> <ol> <li>登陆Gmail，进入设置，找到 <strong>转发和 POP/IMAP</strong> 选项卡，开启 <strong>IMAP</strong> 服务。</li> <li>登录到你的 Google 账号，前往 <a href="https://myaccount.google.com/apppasswords">Google App 密码</a> 页面，生成一个新的 App 密码（用于外部应用访问你的 Gmail）。</li> <li>记下生成的密码，它将用于配置 Calibre-Web 的 SMTP 设置。</li> </ol> <h2 id="9-配置-calibre-web-的-smtp-设置">9. 配置 Calibre-Web 的 SMTP 设置</h2> <p>在 Calibre-Web 中，填写刚才生成的 Gmail SMTP 信息：</p> <ol> <li>打开 Calibre-Web 的管理设置页面，找到 <strong>SMTP 邮件服务器设置</strong> 设置。</li> <li>输入以下信息： <ul> <li>SMTP 服务器：<code class="language-plaintext highlighter-rouge">smtp.gmail.com</code></li> <li>SMTP 端口：<code class="language-plaintext highlighter-rouge">587</code></li> <li>SMTP 用户名：你的 Gmail 地址</li> <li>SMTP 密码：使用 Google App 密码</li> <li>加密方式：<code class="language-plaintext highlighter-rouge">STARTTLS</code></li> </ul> </li> </ol> <p>保存设置后，Calibre-Web 就可以通过你的 Gmail 地址发送邮件了。</p> <h2 id="10-测试向-kindle-发送图书">10. 测试向 Kindle 发送图书</h2> <p>最后一步，测试一下向 Kindle 发送电子书的功能：</p> <ol> <li>在<code class="language-plaintext highlighter-rouge">用户设置</code>的<strong>接收书籍的电子阅读器邮箱地址</strong>中填入你的 Kindle 电子邮箱地址。</li> <li>确保在 Kindle 设置中，已经允许接收来自你这个Gmail地址的邮件发送文档。</li> <li>在 Calibre-Web 中选择一本书，点击 <strong>发送EPUB到电子阅读器</strong>。</li> <li>如果 SMTP 配置正确，你应该能够收到来自Amazon的邮件，提示你有新的文档到达，需要<code class="language-plaintext highlighter-rouge">Verify Request</code>。</li> </ol> <h2 id="总结">总结</h2> <p>通过以上步骤，在 VPS 上通过 1Panel 部署了 Calibre-Web，并且配置了域名和 HTTPS 访问。现在，你可以通过 Calibre-Web 管理和分享你的电子书库，甚至直接将书籍发送到 Kindle。</p> <h2 id="参考资料">参考资料</h2> <ul> <li><a href="https://github.com/1Panel-dev/1Panel">1Panel GitHub</a></li> <li><a href="https://github.com/janeczku/calibre-web">Calibre-Web GitHub</a></li> <li>https://www.cnblogs.com/jiyuwu/p/16313476.html</li> </ul>]]></content><author><name></name></author><category term="Tech"/><category term="Calibre"/><category term="eBook"/><category term="Library"/><category term="Web"/><category term="Docker"/><category term="Calibre-Web"/><summary type="html"><![CDATA[This article shows you how to build your own eBook library with Calibre-Web.]]></summary></entry><entry><title type="html">Python Visualization: Plot Variables on Maps with Subplots</title><link href="https://al-folio.jinjunliu.com/blog/2024/python-plot-map-subplots/" rel="alternate" type="text/html" title="Python Visualization: Plot Variables on Maps with Subplots"/><published>2024-08-06T00:00:00+00:00</published><updated>2024-08-06T00:00:00+00:00</updated><id>https://al-folio.jinjunliu.com/blog/2024/python-plot-map-subplots</id><content type="html" xml:base="https://al-folio.jinjunliu.com/blog/2024/python-plot-map-subplots/"><![CDATA[<p>大气科学中常常需要在地图上绘制一些变量的分布，例如温度、湿度、风场等。在Python中，我们可以使用<code class="language-plaintext highlighter-rouge">matplotlib</code>和<code class="language-plaintext highlighter-rouge">cartopy</code>库来绘制这些地图。本文将介绍如何在地图上绘制多个变量的分布，并将这些地图放在一个图中。</p> <h2 id="代码">代码</h2> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">xarray</span> <span class="k">as</span> <span class="n">xr</span>
<span class="kn">import</span> <span class="n">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">import</span> <span class="n">cartopy.crs</span> <span class="k">as</span> <span class="n">ccrs</span>
<span class="kn">import</span> <span class="n">cartopy.feature</span> <span class="k">as</span> <span class="n">cfeature</span>
<span class="kn">from</span> <span class="n">cartopy.mpl.ticker</span> <span class="kn">import</span> <span class="n">LongitudeFormatter</span><span class="p">,</span> <span class="n">LatitudeFormatter</span>
<span class="kn">import</span> <span class="n">cmaps</span>

<span class="c1"># Open the NetCDF file
</span><span class="n">file_path</span> <span class="o">=</span> <span class="sh">"</span><span class="s">sst.mon.ltm.1991-2020.nc</span><span class="sh">"</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">xr</span><span class="p">.</span><span class="nf">open_dataset</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
<span class="c1"># print lon and lat range
</span><span class="nf">print</span><span class="p">(</span><span class="n">ds</span><span class="p">[</span><span class="sh">'</span><span class="s">lon</span><span class="sh">'</span><span class="p">].</span><span class="n">values</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="n">ds</span><span class="p">[</span><span class="sh">'</span><span class="s">lat</span><span class="sh">'</span><span class="p">].</span><span class="n">values</span><span class="p">)</span>
<span class="c1"># Define the region limits
</span><span class="n">lon_min</span><span class="p">,</span> <span class="n">lon_max</span> <span class="o">=</span> <span class="mi">260</span><span class="p">,</span> <span class="mi">360</span>
<span class="n">lat_min</span><span class="p">,</span> <span class="n">lat_max</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">45</span>
<span class="c1"># Extract the variables
</span><span class="n">var_name</span> <span class="o">=</span> <span class="sh">'</span><span class="s">sst</span><span class="sh">'</span>
<span class="n">data1</span> <span class="o">=</span> <span class="n">ds</span><span class="p">[</span><span class="n">var_name</span><span class="p">].</span><span class="nf">isel</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> <span class="c1"># January
</span><span class="n">data2</span> <span class="o">=</span> <span class="n">ds</span><span class="p">[</span><span class="n">var_name</span><span class="p">].</span><span class="nf">isel</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span> <span class="c1"># June
</span><span class="n">data3</span> <span class="o">=</span> <span class="n">ds</span><span class="p">[</span><span class="n">var_name</span><span class="p">].</span><span class="nf">isel</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span> <span class="c1"># November
# check data dimension
</span><span class="nf">print</span><span class="p">(</span><span class="n">data1</span><span class="p">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">data2</span><span class="p">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">data3</span><span class="p">.</span><span class="n">shape</span><span class="p">)</span>
<span class="c1"># Define the projection
</span><span class="n">projection</span> <span class="o">=</span> <span class="n">ccrs</span><span class="p">.</span><span class="nc">PlateCarree</span><span class="p">()</span>
<span class="c1"># Create the figure and subplots
</span><span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="nf">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">subplot_kw</span><span class="o">=</span><span class="p">{</span><span class="sh">'</span><span class="s">projection</span><span class="sh">'</span><span class="p">:</span> <span class="n">projection</span><span class="p">},</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="c1"># Define the data list and titles
</span><span class="n">data_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">data1</span><span class="p">,</span> <span class="n">data2</span><span class="p">,</span> <span class="n">data3</span><span class="p">]</span>
<span class="n">titles</span> <span class="o">=</span> <span class="p">[</span><span class="sh">'</span><span class="s">(a) January</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">(b) June</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">(c) November</span><span class="sh">'</span><span class="p">]</span>
<span class="c1"># Find the common color limits
</span><span class="n">vmin</span> <span class="o">=</span> <span class="nf">min</span><span class="p">(</span><span class="n">data1</span><span class="p">.</span><span class="nf">min</span><span class="p">().</span><span class="n">values</span><span class="p">,</span> <span class="n">data2</span><span class="p">.</span><span class="nf">min</span><span class="p">().</span><span class="n">values</span><span class="p">,</span> <span class="n">data3</span><span class="p">.</span><span class="nf">min</span><span class="p">().</span><span class="n">values</span><span class="p">)</span>
<span class="n">vmax</span> <span class="o">=</span> <span class="nf">max</span><span class="p">(</span><span class="n">data1</span><span class="p">.</span><span class="nf">max</span><span class="p">().</span><span class="n">values</span><span class="p">,</span> <span class="n">data2</span><span class="p">.</span><span class="nf">max</span><span class="p">().</span><span class="n">values</span><span class="p">,</span> <span class="n">data3</span><span class="p">.</span><span class="nf">max</span><span class="p">().</span><span class="n">values</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">Common color limits:</span><span class="sh">"</span><span class="p">,</span> <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">)</span>
<span class="c1"># round the limits to the nearest 1
</span><span class="n">vmin</span> <span class="o">=</span> <span class="nf">int</span><span class="p">(</span><span class="n">vmin</span><span class="p">)</span>
<span class="n">vmax</span> <span class="o">=</span> <span class="nf">int</span><span class="p">(</span><span class="n">vmax</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
<span class="c1"># define the levels
</span><span class="n">levels</span> <span class="o">=</span> <span class="nf">range</span><span class="p">(</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="c1"># lon and lat ticks
</span><span class="n">lon_formatter</span> <span class="o">=</span> <span class="nc">LongitudeFormatter</span><span class="p">(</span><span class="n">zero_direction_label</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="n">lat_formatter</span> <span class="o">=</span> <span class="nc">LatitudeFormatter</span><span class="p">()</span>
<span class="c1"># colormap
</span><span class="n">cmap</span> <span class="o">=</span> <span class="n">cmaps</span><span class="p">.</span><span class="n">MPL_jet</span>
<span class="c1"># Plot the data
</span><span class="k">for</span> <span class="n">ax</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">title</span> <span class="ow">in</span> <span class="nf">zip</span><span class="p">(</span><span class="n">axes</span><span class="p">,</span> <span class="n">data_list</span><span class="p">,</span> <span class="n">titles</span><span class="p">):</span>
    <span class="n">cs</span> <span class="o">=</span> <span class="n">ax</span><span class="p">.</span><span class="nf">contourf</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="sh">'</span><span class="s">lon</span><span class="sh">'</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="sh">'</span><span class="s">lat</span><span class="sh">'</span><span class="p">],</span> <span class="n">data</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">projection</span><span class="p">,</span> <span class="n">levels</span><span class="o">=</span><span class="n">levels</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">)</span>
    <span class="c1"># add contour lines
</span>    <span class="n">ax</span><span class="p">.</span><span class="nf">contour</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="sh">'</span><span class="s">lon</span><span class="sh">'</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="sh">'</span><span class="s">lat</span><span class="sh">'</span><span class="p">],</span> <span class="n">data</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">projection</span><span class="p">,</span> <span class="n">levels</span><span class="o">=</span><span class="n">levels</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="sh">'</span><span class="s">k</span><span class="sh">'</span><span class="p">,</span> <span class="n">linewidths</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
    <span class="c1"># Add features
</span>    <span class="n">ax</span><span class="p">.</span><span class="nf">coastlines</span><span class="p">()</span>
    <span class="n">ax</span><span class="p">.</span><span class="nf">add_feature</span><span class="p">(</span><span class="n">cfeature</span><span class="p">.</span><span class="n">BORDERS</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">.</span><span class="nf">set_extent</span><span class="p">([</span><span class="n">lon_min</span><span class="p">,</span> <span class="n">lon_max</span><span class="p">,</span> <span class="n">lat_min</span><span class="p">,</span> <span class="n">lat_max</span><span class="p">],</span> <span class="n">crs</span><span class="o">=</span><span class="n">projection</span><span class="p">)</span>
    <span class="c1"># title position: left aligned
</span>    <span class="n">ax</span><span class="p">.</span><span class="nf">set_title</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="sh">'</span><span class="s">left</span><span class="sh">'</span><span class="p">)</span>
    <span class="c1"># Set ticks
</span>    <span class="n">ax</span><span class="p">.</span><span class="nf">set_xticks</span><span class="p">([</span><span class="o">-</span><span class="mi">100</span><span class="p">,</span> <span class="o">-</span><span class="mi">80</span><span class="p">,</span> <span class="o">-</span><span class="mi">60</span><span class="p">,</span> <span class="o">-</span><span class="mi">40</span><span class="p">,</span> <span class="o">-</span><span class="mi">20</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">crs</span><span class="o">=</span><span class="n">projection</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">.</span><span class="nf">set_yticks</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">45</span><span class="p">],</span> <span class="n">crs</span><span class="o">=</span><span class="n">projection</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">.</span><span class="n">xaxis</span><span class="p">.</span><span class="nf">set_major_formatter</span><span class="p">(</span><span class="n">lon_formatter</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">.</span><span class="n">yaxis</span><span class="p">.</span><span class="nf">set_major_formatter</span><span class="p">(</span><span class="n">lat_formatter</span><span class="p">)</span>
<span class="c1"># Add a single colorbar for all subplots, colorbar position is below the subplots and horizontal
</span><span class="n">axins</span> <span class="o">=</span> <span class="n">fig</span><span class="p">.</span><span class="nf">add_axes</span><span class="p">([</span><span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">])</span>
<span class="n">fig</span><span class="p">.</span><span class="nf">colorbar</span><span class="p">(</span><span class="n">cs</span><span class="p">,</span> <span class="n">cax</span><span class="o">=</span><span class="n">axins</span><span class="p">,</span> <span class="n">orientation</span><span class="o">=</span><span class="sh">'</span><span class="s">horizontal</span><span class="sh">'</span><span class="p">,</span> <span class="n">ticks</span><span class="o">=</span><span class="n">levels</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sh">'</span><span class="s">sea surface temperature (°C)</span><span class="sh">'</span><span class="p">)</span>
<span class="c1"># save the plot
</span><span class="n">save_path</span> <span class="o">=</span> <span class="sh">'</span><span class="s">.</span><span class="sh">'</span>
<span class="n">fig_name</span> <span class="o">=</span> <span class="sh">'</span><span class="s">sst-ltm</span><span class="sh">'</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">savefig</span><span class="p">(</span><span class="sa">f</span><span class="sh">'</span><span class="si">{</span><span class="n">save_path</span><span class="si">}</span><span class="s">/</span><span class="si">{</span><span class="n">fig_name</span><span class="si">}</span><span class="s">.png</span><span class="sh">'</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">bbox_inches</span><span class="o">=</span><span class="sh">'</span><span class="s">tight</span><span class="sh">'</span><span class="p">)</span>
<span class="c1"># Display the plot
</span><span class="n">plt</span><span class="p">.</span><span class="nf">show</span><span class="p">()</span>
</code></pre></div></div> <h2 id="说明">说明</h2> <ul> <li>使用了<code class="language-plaintext highlighter-rouge">xarray</code>库来处理NetCDF文件，<code class="language-plaintext highlighter-rouge">matplotlib</code>和<code class="language-plaintext highlighter-rouge">cartopy</code>库来绘制地图。</li> <li><code class="language-plaintext highlighter-rouge">cmaps</code>是一个自定义的colormap库，使用cmaps可以使用NCL的colormap。</li> <li><code class="language-plaintext highlighter-rouge">cartopy</code>库提供了很多地图投影方式，这里使用了<code class="language-plaintext highlighter-rouge">PlateCarree</code>投影。</li> <li><code class="language-plaintext highlighter-rouge">contourf</code>函数用来绘制填充等值线图，<code class="language-plaintext highlighter-rouge">contour</code>函数用来绘制等值线。</li> <li><code class="language-plaintext highlighter-rouge">add_feature</code>函数用来添加地图特征，例如海岸线、边界等。</li> <li><code class="language-plaintext highlighter-rouge">set_extent</code>函数用来设置地图的范围。</li> <li><code class="language-plaintext highlighter-rouge">set_title</code>函数用来设置子图的标题。</li> <li><code class="language-plaintext highlighter-rouge">set_xticks</code>和<code class="language-plaintext highlighter-rouge">set_yticks</code>函数用来设置经纬度的刻度。</li> <li><code class="language-plaintext highlighter-rouge">set_major_formatter</code>函数用来设置经纬度的格式。</li> <li><code class="language-plaintext highlighter-rouge">add_axes</code>函数用来添加colorbar的位置。</li> <li><code class="language-plaintext highlighter-rouge">savefig</code>函数用来保存图片。</li> </ul> <h2 id="结果">结果</h2> <p>以<a href="https://downloads.psl.noaa.gov/Datasets/COBE/sst.mon.ltm.1991-2020.nc">COBE SST LTM数据</a>为例，绘制了三个不同月份下的海表温度多年平均分布图。</p> <p><img src="/assets/img/posts/2024-08-06-python-plot-map-subplots-result.png" alt="Python Plotting Variables Map with Subplots" class="img-fluid" style="width: 100%; height: auto;"/></p>]]></content><author><name></name></author><category term="Research"/><category term="Python"/><category term="Scientific Visualization"/><category term="matplotlib"/><category term="cartopy"/><category term="NetCDF"/><summary type="html"><![CDATA[Plotting variables on maps with subplots in Python.]]></summary></entry><entry><title type="html">Using Unofficial Cloud Storage to Sync Zotero Library</title><link href="https://al-folio.jinjunliu.com/blog/2024/zotero-sync/" rel="alternate" type="text/html" title="Using Unofficial Cloud Storage to Sync Zotero Library"/><published>2024-01-26T00:00:00+00:00</published><updated>2024-01-26T00:00:00+00:00</updated><id>https://al-folio.jinjunliu.com/blog/2024/zotero-sync</id><content type="html" xml:base="https://al-folio.jinjunliu.com/blog/2024/zotero-sync/"><![CDATA[<p><img src="/assets/img/posts/2024-01-26-zotero-sync-example.png" alt="Zotero Sync" class="img-fluid" style="width: 100%; height: auto;"/></p> <p>Today, I migrated my reference management software from Mendeley to Zotero. There are several main reasons:</p> <ul> <li>The old Mendeley Desktop is no longer updated, and the new Mendeley Reference Manager client is entirely cloud-based, leading to loading times and unsmooth usage;</li> <li>The browser plugin Mendeley Web Importer for importing references is not user-friendly, very slow, and often fails to import;</li> <li>Zotero is open-source software, updated frequently, with an active community.</li> </ul> <p>Zotero is great, but the sync function on Zotero’s own server only offers 300MB of storage space for free users, which is quickly filled up if you have a lot of references. The reason for needing to sync the library is that if you have two computers, you need to use Zotero on both and keep them consistent. Also, if you change computers in the future, you would like to quickly sync the library to the new computer.</p> <h2 id="download-and-install-zotero">Download and Install Zotero</h2> <p>The official Zotero website is <a href="https://www.zotero.org/">zotero.org</a>, where you can download the Zotero installation package. No need to elaborate further here.</p> <h2 id="migrate-mendeley-library-to-zotero">Migrate Mendeley Library to Zotero</h2> <p>Zotero provides a one-click migration function for the Mendeley library. Just click <code class="language-plaintext highlighter-rouge">File</code> -&gt; <code class="language-plaintext highlighter-rouge">Import</code> -&gt; <code class="language-plaintext highlighter-rouge">Mendeley Reference Manager</code> in Zotero’s menu, log in to your Mendeley account, and the migration will start.</p> <p><img src="/assets/img/posts/2024-01-26-zotero-sync-1.png" alt="Import Mendeley" class="img-fluid" style="width: 100%; height: auto;"/></p> <h2 id="zotero-sync-settings">Zotero Sync Settings</h2> <p>First, register and log in to a Zotero account by visiting the official website. Then click <code class="language-plaintext highlighter-rouge">Edit</code> -&gt; <code class="language-plaintext highlighter-rouge">Preferences</code> -&gt; <code class="language-plaintext highlighter-rouge">Sync</code> in the toolbar and enter your account credentials.</p> <p>If the Mendeley imported library exceeds 300MB, clicking the sync button in the upper right corner will show a warning that synchronization cannot be completed due to exceeding capacity. Visit the <a href="https://www.zotero.org/settings/storage">Zotero Storage</a> page to see the storage usage.</p> <p><img src="/assets/img/posts/2024-01-26-zotero-sync-2.jpg" alt="Zotero Storage" class="img-fluid" style="width: 100%; height: auto;"/></p> <p>The official website offers storage upgrade plans, but they require an additional fee. At the same time, Zotero also provides other sync solutions, which is very considerate. On this page: <a href="https://www.zotero.org/support/sync#alternative_syncing_solutions">https://www.zotero.org/support/sync#alternative_syncing_solutions</a>, you can find other sync solutions provided by Zotero. For example, the simplest method is:</p> <blockquote> <p>The easiest method is to use linked files, rather than stored copies of files, with only your attachment files in the externally synced folder. The ZotFile plugin can make this simple by automatically moving attachment files to a designated folder as you import them. You should also set up Zotero’s Linked Attachment Base Directory feature to point to the same folder so that Zotero can find your files on each computer, even if the path to the cloud storage folder differs.</p> </blockquote> <p>This means using the ZotFile plugin to transfer attachment files (i.e., the PDF files of the references) to a local folder of a cloud drive, which will be automatically synced by the cloud drive. ZotFile will automatically set links to these external files, thus achieving the separation of metadata (such as the title, author, DOI of the reference) and attachments. Metadata is stored on Zotero’s server, while attachments are stored on the cloud drive. The size of metadata is much smaller than attachments, so using Zotero’s server is entirely sufficient.</p> <p>I use OneDrive to sync attachments because I have co-subscribed to Office 365 Family, providing 1TB of OneDrive storage, which is sufficient. If you use other cloud storage like iCloud, Google Drive, Dropbox, etc., the method is the same.</p> <h2 id="download-and-install-zotfile">Download and Install ZotFile</h2> <p>ZotFile is a plugin for Zotero. Its official website is <a href="https://zotfile.com/">zotfile.com</a>, where you can download the ZotFile installation package. After downloading, click <code class="language-plaintext highlighter-rouge">Tools</code> -&gt; <code class="language-plaintext highlighter-rouge">Add-ons</code> -&gt; <code class="language-plaintext highlighter-rouge">Install Add-on From File...</code> in Zotero’s menu and select the downloaded ZotFile package. As shown below:</p> <p><img src="/assets/img/posts/2024-01-26-zotero-sync-3.png" alt="Install ZotFile" class="img-fluid" style="width: 100%; height: auto;"/></p> <h2 id="set-up-zotfile">Set Up ZotFile</h2> <p>After installing ZotFile, click <code class="language-plaintext highlighter-rouge">Tools</code> -&gt; <code class="language-plaintext highlighter-rouge">ZotFile Preferences</code> in Zotero’s menu to open the ZotFile settings interface. As shown below:</p> <p><img src="/assets/img/posts/2024-01-26-zotero-sync-4.png" alt="ZotFile Preferences" class="img-fluid" style="width: 100%; height: auto;"/></p> <p>In <code class="language-plaintext highlighter-rouge">General Settings</code>, set <code class="language-plaintext highlighter-rouge">Source Folder for Attaching New Files</code> to your download folder, such as <code class="language-plaintext highlighter-rouge">C:\Users\username\Downloads</code>. This step makes it convenient to transfer downloaded reference PDF files to the cloud drive folder. Thus, if you select a reference, right-click, and choose <code class="language-plaintext highlighter-rouge">attach new file</code>, ZotFile will automatically transfer the reference’s PDF file from the download folder to the cloud drive folder and set the link to the file in the cloud drive folder.</p> <p>Next, set <code class="language-plaintext highlighter-rouge">Location of Files</code> to your cloud drive folder. I set it to <code class="language-plaintext highlighter-rouge">C:\Users\username\OneDrive\Zotero</code>, where <code class="language-plaintext highlighter-rouge">username</code> is the Windows username. The <code class="language-plaintext highlighter-rouge">Zotero</code> folder is newly created in OneDrive for storing reference attachments. On Mac, the directory structure should be similar to <code class="language-plaintext highlighter-rouge">/Users/username/OneDrive/Zotero</code>.</p> <h2 id="transfer-reference-attachments">Transfer Reference Attachments</h2> <p>At this point, the attachments of references in the library are not yet transferred to the Zotero folder in the cloud drive. The initial transfer needs to be done manually. In Zotero, click <code class="language-plaintext highlighter-rouge">My Library</code> on the left, press <code class="language-plaintext highlighter-rouge">ctrl+A</code> (or <code class="language-plaintext highlighter-rouge">command+A</code> on Mac) to select all references, then right-click, select <code class="language-plaintext highlighter-rouge">Manage Attachments</code> -&gt; <code class="language-plaintext highlighter-rouge">Rename and Move</code>, and wait a few minutes. All reference attachments will be transferred to the Zotero folder in the cloud drive (here <code class="language-plaintext highlighter-rouge">C:\Users\username\OneDrive\Zotero</code>) and renamed according to a unified rule (the renaming rule can also be set in ZotFile settings, but I didn’t change it), making it look very tidy.</p> <h2 id="set-zoteros-attachment-folder">Set Zotero’s Attachment Folder</h2> <p>In Zotero, click <code class="language-plaintext highlighter-rouge">Edit</code> -&gt; <code class="language-plaintext highlighter-rouge">Preferences</code> -&gt; <code class="language-plaintext highlighter-rouge">Advanced</code> -&gt; <code class="language-plaintext highlighter-rouge">Files and Folders</code>, and set <code class="language-plaintext highlighter-rouge">Linked Attachment Base Directory</code> to your cloud drive folder, here <code class="language-plaintext highlighter-rouge">C:\Users\username\OneDrive\Zotero</code>. As shown below:</p> <p><img src="/assets/img/posts/2024-01-26-zotero-sync-5.png" alt="Zotero Preferences" class="img-fluid" style="width: 100%; height: auto;"/></p> <p>This step is essential because the cloud drive folder path may differ on different computers. For example, on Windows, it might be <code class="language-plaintext highlighter-rouge">C:\Users\username\OneDrive\Zotero</code>, while on Mac, it could be <code class="language-plaintext highlighter-rouge">/Users/username/OneDrive/Zotero</code>. With this setting, Zotero can find the cloud drive directory as the Base Directory and then locate the reference attachments within the Base Directory.</p> <h2 id="purge-storage-in-my-library">Purge Storage in My Library</h2> <p>After completing the above steps, theoretically, all Zotero reference attachments should have been transferred to the cloud drive. However, if you click the sync button in the upper right corner, there might still be a warning. This is because some reference attachments remain on Zotero’s server and need to be deleted manually (this might be a bug). Visit the <a href="https://www.zotero.org/settings/storage">Zotero Storage</a> page and click <code class="language-plaintext highlighter-rouge">Purge Storage in My Library</code>. Then, return to the Zotero client, click <code class="language-plaintext highlighter-rouge">Edit</code> -&gt; <code class="language-plaintext highlighter-rouge">Preferences</code> -&gt; <code class="language-plaintext highlighter-rouge">Sync</code>, click <code class="language-plaintext highlighter-rouge">Reset</code>, and choose <code class="language-plaintext highlighter-rouge">Replace Online Library</code>. After that, click the sync button in the upper right corner, and there will be no warning. <strong>Note: Be careful with this step. To prevent database loss, it’s best to back up the database first. That is, copy the <code class="language-plaintext highlighter-rouge">C:\Users\username\Zotero</code> (Windows) or <code class="language-plaintext highlighter-rouge">/Users/username/Zotero</code> (Mac) folder to another location.</strong></p> <h2 id="sync-on-other-computers">Sync on Other Computers</h2> <p>Once the above steps are completed, Zotero will have full cloud sync functionality. On other computers, simply install Zotero and ZotFile, log in to your Zotero account, set up ZotFile and <code class="language-plaintext highlighter-rouge">Linked Attachment Base Directory</code> similarly, then click the sync button in the upper right corner to sync the library.</p> <h2 id="note">Note</h2> <p>This post was originally written in Chinese, and the English version is translated by ChatGPT.</p>]]></content><author><name></name></author><category term="Research"/><category term="Zotero"/><category term="Sync"/><category term="OneDrive"/><summary type="html"><![CDATA[This article explains how to use unofficial cloud storage (such as OneDrive) to sync the Zotero library.]]></summary></entry></feed>